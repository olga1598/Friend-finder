<!Doctype <!DOCTYPE html>
<html>
<head>
    <title>Friend Finder</title>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js'></script>
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script> -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css"/>
      
    
</head>
<body>
    <div style="width: 70%; margin-left: auto; margin-right: auto">
        <h2>Survey Questions</h1>
        <hr class="my-4">
        <h4>About You.</h4>    
            <form>
                <div class="form-group">
                    <label for="exampleInputEmail1" style="font-style: italic">Name (required)</label>
                    <input type="text" class="form-control" id="name" placeholder="Enter name">
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1" style="font-style: italic">Link to Photo Image (required)</label>
                    <input type="text" class="form-control" id="photo" placeholder="Link to your photo">
                </div>
                <hr class="my-4">

                <h4>Question 1.</h4>
                <p>You are up for any adventure.</p>
                <select class="custom-select" id="q1">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 2.</h4>
                <p>Physical appearance is very important to you.</p>
                <select class="custom-select" id="q2">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 3.</h4>
                <p>You work well under pressure.</p>
                <select class="custom-select" id="q3">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 4.</h4>
                <p>You are creative.</p>
                <select class="custom-select" id="q4">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 5.</h4>
                <p>You are very romantic.</p>
                <select class="custom-select" id="q5">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 6.</h4>
                <p>You like risks.</p>
                <select class="custom-select" id="q6">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 7.</h4>
                <p>You like children.</p>
                <select class="custom-select" id="q7">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 8.</h4>
                <p>You prefer to listern rather then talk.</p>
                <select class="custom-select" id="q8">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 9.</h4>
                <p>You are always positive and in great mood.</p>
                <select class="custom-select" id="q9">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>

                <h4>Question 10.</h4>
                <p>You would prefer quiet night at home with book to dance party.</p>
                <select class="custom-select" id="q10">
                        <option selected>Select and Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="3">4</option>
                        <option value="3">5 (Strongly Agree)</option>
                </select>

                <br/>
                <br/>


                <button type="submit" class="btn btn-primary btn-large btn-block" id="submit"><i class="fas fa-check-circle"></i> Submit</button>
        </form>
        <div id="bestFriendModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width:50%; margin-left:auto; margin-right:auto; opacity:1;">
            <div class="modal-content"> 
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"></button>
                    <h3 id="myModalLabel">We found your best match!!!</h3>
                </div>
                <div class="modal-body">
                    <h2 id="bestFriend"></h2>
                    <img id="bestFriendPhoto" src="" style="width:50%;" />
                </div>
                <!-- <div class="modal-footer">
                    <button href="/" class="btn btn-default">Done</button>
                </div>  -->
            </div>   
        </div>
    </div>
    

    <script type="text/javascript">
        // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
        // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
        // Our api recognizes the route (/api/reservations)... and then runs the associated code (found in api-routes.js).
        // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

          $("#submit").on("click", function(event) {
            event.preventDefault();
            var q1 = $("#q1").val();
            var q2 = $("#q2").val();
            var q3 = $("#q3").val();
            var q4 = $("#q4").val();
            var q5 = $("#q5").val();
            var q6 = $("#q6").val();
            var q7 = $("#q7").val();
            var q8 = $("#q8").val();
            var q9 = $("#q9").val();
            var q10 = $("#q10").val();

            var scores = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10];

            var newFriend = {
              name: $("#name").val().trim(),
              photo: $("#photo").val().trim(),
              scores: scores
            };
            console.log("WE HAVE new input: ", newFriend);
            //$("#bestFriendModal").modal('toggle');
            $("#bestFriendModal").modal('show');

          // The following code is similar to the standard ajax function we used.
          // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
          // The callback is the response of the server.      
            $.post("/api/friends", newFriend)
              .then(function(data) {
               
                console.log("HERE is best match: ", data);
                console.log(data.name, data.photo);
                alert("Adding Friend..."); 
                $("#bestFriend").append("The name of the person is: ", data.name);   
                $("#bestFriendPhoto").attr("src", data.photo);
              });

          });
        </script>
      
</body>
</html>